package me.zakarls.zach;

import org.bukkit.ChatColor;
import org.bukkit.Location;
import org.bukkit.Material;
import org.bukkit.World;
import org.bukkit.block.Block;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.block.BlockPlaceEvent;
import org.bukkit.event.player.PlayerInteractEvent;
import org.bukkit.inventory.ItemStack;

public class MyBlockListener
  implements Listener
{
  public static Zach plugin;
  public static Material[] blacklist = { Material.TNT, Material.BEDROCK };
  
  @EventHandler
  public void onBlockPlace(BlockPlaceEvent event)
  {
    Material block = event.getBlock().getType();
    Player player = event.getPlayer();
    Material[] arrayOfMaterial;
    int j = (arrayOfMaterial = blacklist).length;
    for (int i = 0; i < j; i++)
    {
      Material blocked = arrayOfMaterial[i];
      if ((blocked == block) && 
        (!player.isOp()))
      {
        Location location = event.getBlock().getLocation();
        World world = player.getWorld();
        player.chat("I Just Placed " + ChatColor.DARK_RED + blocked);
        world.strikeLightning(location);
        try
        {
          Thread.sleep(100L);
        }
        catch (InterruptedException e)
        {
          e.printStackTrace();
        }
        event.getBlock().setType(Material.AIR);
      }
    }
  }
  
  @EventHandler
  public void onPlayerInteract(PlayerInteractEvent event)
  {
    Player player = event.getPlayer();
    int blockId = player.getItemInHand().getType().getId();
    if ((player.isOp()) && 
      (blockId == 50))
    {
      Block block = player.getTargetBlock(null, 25);
      Location location = block.getLocation();
      World world = player.getWorld();
      world.strikeLightning(location);
    }
  }
}
